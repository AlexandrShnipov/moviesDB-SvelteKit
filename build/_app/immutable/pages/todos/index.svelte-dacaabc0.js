import{W as K,S as ie,i as re,s as ue,e as v,k as N,c as b,a as P,m as O,d as T,b as a,X as ae,g as Q,F as d,Y as W,Z as de,_ as ce,$ as he,L as _e,a0 as ne,T as fe,t as pe,H as me,h as ve,a1 as be,q as ge,r as ye,p as Te,o as Ee,a2 as ke,n as we}from"../../chunks/index-8a424401.js";import{i as Me}from"../../chunks/navigation-772a9d8a.js";import{c as Ue,s as le}from"../../chunks/index-a2e206fb.js";import"../../chunks/singletons-cdeec3fd.js";function X(c,{pending:e,error:t,result:n}={}){let h;async function y(m){const i=h={};m.preventDefault();const u=new FormData(c);e&&e({data:u,form:c});try{const _=await fetch(c.action,{method:c.method,headers:{accept:"application/json"},body:u});if(i!==h)return;if(_.ok){n&&n({data:u,form:c,response:_});const s=new URL(c.action);s.search=s.hash="",Me(s.href)}else t?t({data:u,form:c,error:null,response:_}):console.error(await _.text())}catch(_){if(t&&_ instanceof Error)t({data:u,form:c,error:_,response:null});else throw _}}return c.addEventListener("submit",y),{destroy(){c.removeEventListener("submit",y)}}}function Ne(c,{from:e,to:t},n={}){const h=getComputedStyle(c),y=h.transform==="none"?"":h.transform,[m,i]=h.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*m/t.width-(t.left+m),_=e.top+e.height*i/t.height-(t.top+i),{delay:s=0,duration:w=k=>Math.sqrt(k)*120,easing:M=Ue}=n;return{delay:s,duration:K(w)?w(Math.sqrt(u*u+_*_)):w,easing:M,css:(k,f)=>{const g=f*u,F=f*_,o=k+f*e.width/t.width,l=k+f*e.height/t.height;return`transform: ${y} translate(${g}px, ${F}px) scale(${o}, ${l});`}}}function se(c,e,t){const n=c.slice();return n[3]=e[t],n[4]=e,n[5]=t,n}function oe(c,e){let t,n,h,y,m,i,u,_,s,w,M,k,f,g,F,o,l,r,L,D,C,I,R,S,Y,q,V,$,Z,A,z,G=we,U,J,x;function ee(...E){return e[1](e[3],e[4],e[5],...E)}function te(){return e[2](e[3],e[4],e[5])}return{key:c,first:null,c(){t=v("div"),n=v("form"),h=v("input"),m=N(),i=v("input"),_=N(),s=v("button"),k=N(),f=v("form"),g=v("input"),o=N(),l=v("input"),L=N(),D=v("button"),C=N(),I=v("form"),R=v("input"),Y=N(),q=v("button"),Z=N(),this.h()},l(E){t=b(E,"DIV",{class:!0});var p=P(t);n=b(p,"FORM",{action:!0,method:!0});var B=P(n);h=b(B,"INPUT",{type:!0,name:!0,class:!0}),m=O(B),i=b(B,"INPUT",{type:!0,name:!0,class:!0}),_=O(B),s=b(B,"BUTTON",{class:!0,"aria-label":!0}),P(s).forEach(T),B.forEach(T),k=O(p),f=b(p,"FORM",{class:!0,action:!0,method:!0});var H=P(f);g=b(H,"INPUT",{type:!0,name:!0,class:!0}),o=O(H),l=b(H,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),L=O(H),D=b(H,"BUTTON",{class:!0,"aria-label":!0}),P(D).forEach(T),H.forEach(T),C=O(p),I=b(p,"FORM",{action:!0,method:!0});var j=P(I);R=b(j,"INPUT",{type:!0,name:!0,class:!0}),Y=O(j),q=b(j,"BUTTON",{class:!0,"aria-label":!0}),P(q).forEach(T),j.forEach(T),Z=O(p),p.forEach(T),this.h()},h(){a(h,"type","hidden"),a(h,"name","uid"),h.value=y=e[3].uid,a(h,"class","svelte-16nsat"),a(i,"type","hidden"),a(i,"name","done"),i.value=u=e[3].done?"":"true",a(i,"class","svelte-16nsat"),a(s,"class","toggle svelte-16nsat"),a(s,"aria-label",w="Mark todo as "+(e[3].done?"not done":"done")),a(n,"action","/todos?_method=PATCH"),a(n,"method","post"),a(g,"type","hidden"),a(g,"name","uid"),g.value=F=e[3].uid,a(g,"class","svelte-16nsat"),a(l,"aria-label","Edit todo"),a(l,"type","text"),a(l,"name","text"),l.value=r=e[3].text,a(l,"class","svelte-16nsat"),a(D,"class","save svelte-16nsat"),a(D,"aria-label","Save todo"),a(f,"class","text svelte-16nsat"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(R,"type","hidden"),a(R,"name","uid"),R.value=S=e[3].uid,a(R,"class","svelte-16nsat"),a(q,"class","delete svelte-16nsat"),a(q,"aria-label","Delete todo"),q.disabled=V=e[3].pending_delete,a(I,"action","/todos?_method=DELETE"),a(I,"method","post"),a(t,"class","todo svelte-16nsat"),ae(t,"done",e[3].done),this.first=t},m(E,p){Q(E,t,p),d(t,n),d(n,h),d(n,m),d(n,i),d(n,_),d(n,s),d(t,k),d(t,f),d(f,g),d(f,o),d(f,l),d(f,L),d(f,D),d(t,C),d(t,I),d(I,R),d(I,Y),d(I,q),d(t,Z),U=!0,J||(x=[W(M=X.call(null,n,{pending:ee})),W(X.call(null,f)),W($=X.call(null,I,{pending:te}))],J=!0)},p(E,p){e=E,(!U||p&1&&y!==(y=e[3].uid))&&(h.value=y),(!U||p&1&&u!==(u=e[3].done?"":"true"))&&(i.value=u),(!U||p&1&&w!==(w="Mark todo as "+(e[3].done?"not done":"done")))&&a(s,"aria-label",w),M&&K(M.update)&&p&1&&M.update.call(null,{pending:ee}),(!U||p&1&&F!==(F=e[3].uid))&&(g.value=F),(!U||p&1&&r!==(r=e[3].text)&&l.value!==r)&&(l.value=r),(!U||p&1&&S!==(S=e[3].uid))&&(R.value=S),(!U||p&1&&V!==(V=e[3].pending_delete))&&(q.disabled=V),$&&K($.update)&&p&1&&$.update.call(null,{pending:te}),p&1&&ae(t,"done",e[3].done)},r(){z=t.getBoundingClientRect()},f(){de(t),G(),ce(t,z)},a(){G(),G=he(t,z,Ne,{duration:200})},i(E){U||(E&&_e(()=>{A||(A=ne(t,le,{start:.7},!0)),A.run(1)}),U=!0)},o(E){E&&(A||(A=ne(t,le,{start:.7},!1)),A.run(0)),U=!1},d(E){E&&T(t),E&&A&&A.end(),J=!1,fe(x)}}}function Oe(c){let e,t,n,h,y,m,i,u,_,s=[],w=new Map,M,k,f,g=c[0];const F=o=>o[3].uid;for(let o=0;o<g.length;o+=1){let l=se(c,g,o),r=F(l);w.set(r,s[o]=oe(r,l))}return{c(){e=v("meta"),t=N(),n=v("div"),h=v("h1"),y=pe("Todos"),m=N(),i=v("form"),u=v("input"),_=N();for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){const l=me('[data-svelte="svelte-aw2gey"]',document.head);e=b(l,"META",{name:!0,content:!0}),l.forEach(T),t=O(o),n=b(o,"DIV",{class:!0});var r=P(n);h=b(r,"H1",{});var L=P(h);y=ve(L,"Todos"),L.forEach(T),m=O(r),i=b(r,"FORM",{class:!0,action:!0,method:!0});var D=P(i);u=b(D,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),D.forEach(T),_=O(r);for(let C=0;C<s.length;C+=1)s[C].l(r);r.forEach(T),this.h()},h(){document.title="Todos",a(e,"name","description"),a(e,"content","A todo list app"),a(u,"name","text"),a(u,"aria-label","Add todo"),a(u,"placeholder","+ tap to add a todo"),a(u,"class","svelte-16nsat"),a(i,"class","new svelte-16nsat"),a(i,"action","/todos"),a(i,"method","post"),a(n,"class","todos svelte-16nsat")},m(o,l){d(document.head,e),Q(o,t,l),Q(o,n,l),d(n,h),d(h,y),d(n,m),d(n,i),d(i,u),d(n,_);for(let r=0;r<s.length;r+=1)s[r].m(n,null);M=!0,k||(f=W(X.call(null,i,{result:Ie})),k=!0)},p(o,[l]){if(l&1){g=o[0],Ee();for(let r=0;r<s.length;r+=1)s[r].r();s=be(s,l,F,1,o,g,w,n,ke,oe,null,se);for(let r=0;r<s.length;r+=1)s[r].a();ge()}},i(o){if(!M){for(let l=0;l<g.length;l+=1)ye(s[l]);M=!0}},o(o){for(let l=0;l<s.length;l+=1)Te(s[l]);M=!1},d(o){T(e),o&&T(t),o&&T(n);for(let l=0;l<s.length;l+=1)s[l].d();k=!1,f()}}}const Ie=async({form:c})=>{c.reset()};function Pe(c,e,t){let{todos:n}=e;const h=(m,i,u,{data:_})=>{t(0,i[u].done=!!_.get("done"),n)},y=(m,i,u)=>t(0,i[u].pending_delete=!0,n);return c.$$set=m=>{"todos"in m&&t(0,n=m.todos)},[n,h,y]}class Ae extends ie{constructor(e){super(),re(this,e,Pe,Oe,ue,{todos:0})}}export{Ae as default};
